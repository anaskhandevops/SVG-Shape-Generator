<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Shape Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Style range sliders */
        input[type="range"] {
            cursor: pointer;
            accent-color: #4f46e5; /* Indigo */
            height: 8px;
            background-color: #e5e7eb; /* gray-200 */
            border-radius: 9999px; /* rounded-full */
            appearance: none;
            -webkit-appearance: none;
        }
        input[type="range"]::-webkit-slider-thumb {
             -webkit-appearance: none;
             appearance: none;
             width: 16px;
             height: 16px;
             background: #4f46e5; /* Indigo */
             border-radius: 50%;
             cursor: pointer;
        }
        input[type="range"]::-moz-range-thumb {
             width: 16px;
             height: 16px;
             background: #4f46e5; /* Indigo */
             border-radius: 50%;
             cursor: pointer;
             border: none;
        }
        /* Style color inputs */
        input[type="color"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 40px;
            height: 40px;
            padding: 0;
            border: 1px solid #d1d5db; /* gray-300 */
            border-radius: 0.375rem; /* rounded-md */
            cursor: pointer;
            background-color: transparent;
        }
        input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
        input[type="color"]::-webkit-color-swatch { border: none; border-radius: 0.25rem; }
        input[type="color"]::-moz-color-swatch { border: none; border-radius: 0.25rem; }

        /* SVG Preview Area */
        #svgPreview {
            min-height: 300px; /* Increased height */
            border: 1px dashed #d1d5db; /* gray-300 */
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb; /* gray-50 */
            overflow: hidden;
            position: relative; /* For centering guides */
        }
        #svgPreview svg {
            max-width: 100%;
            max-height: 100%;
            display: block;
        }

        /* SVG Code Output */
        #svgCodeOutput {
            font-family: monospace;
            background-color: #f3f4f6; /* gray-100 */
            border: 1px solid #d1d5db; /* gray-300 */
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.75rem 1rem;
            word-wrap: break-word;
            white-space: pre-wrap;
            min-height: 150px;
            max-height: 300px;
            overflow-y: auto;
        }
        /* Message box styling */
        #message-box {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            padding: 10px 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000; opacity: 0; transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            pointer-events: none; transform: translate(-50%, 20px);
        }
        #message-box.show { opacity: 1; pointer-events: auto; transform: translateX(-50%); }
        #message-box.success { background-color: #dcfce7; color: #166534; border: 1px solid #86efac; }
        #message-box.error { background-color: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }

        /* Helper class for control groups */
        .control-group { transition: opacity 0.3s ease-in-out, max-height 0.3s ease-in-out; overflow: hidden; }
        .control-group.hidden { max-height: 0; opacity: 0; margin-top: 0 !important; margin-bottom: 0 !important; padding-top: 0 !important; padding-bottom: 0 !important; border: none !important; }

    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 p-4 md:p-8">

    <div class="bg-white p-6 sm:p-8 rounded-lg shadow-xl w-full max-w-5xl mx-auto">

        <h1 class="text-2xl sm:text-3xl font-semibold text-center text-gray-800 mb-8">
             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 inline-block mr-2 align-text-bottom">
               <path stroke-linecap="round" stroke-linejoin="round" d="M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.63 2.25A14.98 14.98 0 003.47 14.37m12.12 0a14.98 14.98 0 01-8.24 2.58m8.24-2.58a14.98 14.98 0 00-2.58-8.24m-8.24 5.66a14.98 14.98 0 016.16-12.12m0 0A14.98 14.98 0 019.63 2.25m12.12 0A14.98 14.98 0 009.63 2.25M3.47 14.37a14.98 14.98 0 006.16 12.12m0 0a14.98 14.98 0 006.16-12.12m-12.12 0l-5.66-8.24m5.66 8.24l8.24 5.66" />
             </svg>
            SVG Shape Generator
        </h1>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="space-y-5 border border-gray-200 rounded-lg p-5 bg-white shadow-sm">
                <h2 class="text-lg font-medium text-gray-700 mb-3 text-center border-b pb-2">Controls</h2>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Shape Type:</label>
                    <select id="shapeType" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                        <option value="polygon">Polygon</option>
                        <option value="star">Star</option>
                        <option value="circle">Circle</option>
                        <option value="ellipse">Ellipse</option>
                        <option value="rectangle">Rectangle</option>
                        <option value="rounded_rectangle">Rounded Rectangle</option>
                        <option value="line">Line</option>
                    </select>
                </div>

                <div id="groupPolyStar" class="control-group space-y-4 border-t pt-4">
                     <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Polygon / Star</h3>
                    <div class="flex items-center space-x-3">
                        <label for="points" class="w-28 text-sm font-medium text-gray-600 shrink-0">Points / Sides:</label>
                        <input type="range" id="points" min="3" max="20" value="5" class="flex-grow">
                        <span id="pointsValue" class="text-sm text-gray-500 w-8 text-right font-mono">5</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <label for="outerRadius" class="w-28 text-sm font-medium text-gray-600 shrink-0">Outer Radius:</label>
                        <input type="range" id="outerRadius" min="20" max="145" value="100" class="flex-grow">
                        <span id="outerRadiusValue" class="text-sm text-gray-500 w-8 text-right font-mono">100</span>
                    </div>
                    <div id="innerRadiusControl" class="control-group flex items-center space-x-3">
                        <label for="innerRadius" class="w-28 text-sm font-medium text-gray-600 shrink-0">Inner Radius:</label>
                        <input type="range" id="innerRadius" min="5" max="140" value="50" class="flex-grow">
                        <span id="innerRadiusValue" class="text-sm text-gray-500 w-8 text-right font-mono">50</span>
                    </div>
                </div>

                 <div id="groupCircle" class="control-group space-y-4 border-t pt-4 hidden">
                     <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Circle</h3>
                     <div class="flex items-center space-x-3">
                        <label for="circleR" class="w-28 text-sm font-medium text-gray-600 shrink-0">Radius (r):</label>
                        <input type="range" id="circleR" min="10" max="145" value="80" class="flex-grow">
                        <span id="circleRValue" class="text-sm text-gray-500 w-8 text-right font-mono">80</span>
                    </div>
                     <div class="flex items-center space-x-3">
                        <label for="circleCX" class="w-28 text-sm font-medium text-gray-600 shrink-0">Center X (cx):</label>
                        <input type="range" id="circleCX" min="10" max="290" value="150" class="flex-grow">
                        <span id="circleCXValue" class="text-sm text-gray-500 w-8 text-right font-mono">150</span>
                    </div>
                     <div class="flex items-center space-x-3">
                        <label for="circleCY" class="w-28 text-sm font-medium text-gray-600 shrink-0">Center Y (cy):</label>
                        <input type="range" id="circleCY" min="10" max="290" value="150" class="flex-grow">
                        <span id="circleCYValue" class="text-sm text-gray-500 w-8 text-right font-mono">150</span>
                    </div>
                </div>

                 <div id="groupEllipse" class="control-group space-y-4 border-t pt-4 hidden">
                     <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Ellipse</h3>
                     <div class="flex items-center space-x-3">
                        <label for="ellipseRX" class="w-28 text-sm font-medium text-gray-600 shrink-0">Radius X (rx):</label>
                        <input type="range" id="ellipseRX" min="10" max="145" value="100" class="flex-grow">
                        <span id="ellipseRXValue" class="text-sm text-gray-500 w-8 text-right font-mono">100</span>
                    </div>
                     <div class="flex items-center space-x-3">
                        <label for="ellipseRY" class="w-28 text-sm font-medium text-gray-600 shrink-0">Radius Y (ry):</label>
                        <input type="range" id="ellipseRY" min="10" max="145" value="60" class="flex-grow">
                        <span id="ellipseRYValue" class="text-sm text-gray-500 w-8 text-right font-mono">60</span>
                    </div>
                     <div class="flex items-center space-x-3">
                        <label for="ellipseCX" class="w-28 text-sm font-medium text-gray-600 shrink-0">Center X (cx):</label>
                        <input type="range" id="ellipseCX" min="10" max="290" value="150" class="flex-grow">
                        <span id="ellipseCXValue" class="text-sm text-gray-500 w-8 text-right font-mono">150</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <label for="ellipseCY" class="w-28 text-sm font-medium text-gray-600 shrink-0">Center Y (cy):</label>
                        <input type="range" id="ellipseCY" min="10" max="290" value="150" class="flex-grow">
                        <span id="ellipseCYValue" class="text-sm text-gray-500 w-8 text-right font-mono">150</span>
                    </div>
                </div>

                 <div id="groupRectangle" class="control-group space-y-4 border-t pt-4 hidden">
                     <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Rectangle</h3>
                     <div class="flex items-center space-x-3">
                        <label for="rectWidth" class="w-28 text-sm font-medium text-gray-600 shrink-0">Width:</label>
                        <input type="range" id="rectWidth" min="10" max="280" value="150" class="flex-grow">
                        <span id="rectWidthValue" class="text-sm text-gray-500 w-8 text-right font-mono">150</span>
                    </div>
                     <div class="flex items-center space-x-3">
                        <label for="rectHeight" class="w-28 text-sm font-medium text-gray-600 shrink-0">Height:</label>
                        <input type="range" id="rectHeight" min="10" max="280" value="100" class="flex-grow">
                        <span id="rectHeightValue" class="text-sm text-gray-500 w-8 text-right font-mono">100</span>
                    </div>
                     <div class="flex items-center space-x-3">
                        <label for="rectX" class="w-28 text-sm font-medium text-gray-600 shrink-0">Top-Left X:</label>
                        <input type="range" id="rectX" min="0" max="290" value="75" class="flex-grow">
                        <span id="rectXValue" class="text-sm text-gray-500 w-8 text-right font-mono">75</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <label for="rectY" class="w-28 text-sm font-medium text-gray-600 shrink-0">Top-Left Y:</label>
                        <input type="range" id="rectY" min="0" max="290" value="100" class="flex-grow">
                        <span id="rectYValue" class="text-sm text-gray-500 w-8 text-right font-mono">100</span>
                    </div>
                     <div id="rectRXControl" class="control-group flex items-center space-x-3">
                        <label for="rectRX" class="w-28 text-sm font-medium text-gray-600 shrink-0">Corner RX:</label>
                        <input type="range" id="rectRX" min="0" max="140" value="10" class="flex-grow">
                        <span id="rectRXValue" class="text-sm text-gray-500 w-8 text-right font-mono">10</span>
                    </div>
                    <div id="rectRYControl" class="control-group flex items-center space-x-3">
                        <label for="rectRY" class="w-28 text-sm font-medium text-gray-600 shrink-0">Corner RY:</label>
                        <input type="range" id="rectRY" min="0" max="140" value="10" class="flex-grow">
                        <span id="rectRYValue" class="text-sm text-gray-500 w-8 text-right font-mono">10</span>
                    </div>
                </div>

                 <div id="groupLine" class="control-group space-y-4 border-t pt-4 hidden">
                     <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Line</h3>
                    <div class="flex items-center space-x-3">
                        <label for="lineX1" class="w-28 text-sm font-medium text-gray-600 shrink-0">Start X (x1):</label>
                        <input type="range" id="lineX1" min="0" max="300" value="50" class="flex-grow">
                        <span id="lineX1Value" class="text-sm text-gray-500 w-8 text-right font-mono">50</span>
                    </div>
                     <div class="flex items-center space-x-3">
                        <label for="lineY1" class="w-28 text-sm font-medium text-gray-600 shrink-0">Start Y (y1):</label>
                        <input type="range" id="lineY1" min="0" max="300" value="50" class="flex-grow">
                        <span id="lineY1Value" class="text-sm text-gray-500 w-8 text-right font-mono">50</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <label for="lineX2" class="w-28 text-sm font-medium text-gray-600 shrink-0">End X (x2):</label>
                        <input type="range" id="lineX2" min="0" max="300" value="250" class="flex-grow">
                        <span id="lineX2Value" class="text-sm text-gray-500 w-8 text-right font-mono">250</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <label for="lineY2" class="w-28 text-sm font-medium text-gray-600 shrink-0">End Y (y2):</label>
                        <input type="range" id="lineY2" min="0" max="300" value="250" class="flex-grow">
                        <span id="lineY2Value" class="text-sm text-gray-500 w-8 text-right font-mono">250</span>
                    </div>
                </div>

                <div class="space-y-4 border-t pt-4">
                     <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Appearance</h3>
                    <div id="fillControl" class="flex items-center space-x-3">
                        <label for="fillColor" class="w-28 text-sm font-medium text-gray-600 shrink-0">Fill Color:</label>
                        <input type="color" id="fillColor" value="#6366f1"> <span id="fillColorValue" class="text-sm text-gray-500 font-mono">#6366F1</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <label for="strokeColor" class="w-28 text-sm font-medium text-gray-600 shrink-0">Stroke Color:</label>
                        <input type="color" id="strokeColor" value="#374151"> <span id="strokeColorValue" class="text-sm text-gray-500 font-mono">#374151</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <label for="strokeWidth" class="w-28 text-sm font-medium text-gray-600 shrink-0">Stroke Width:</label>
                        <input type="range" id="strokeWidth" min="0" max="20" value="2" step="0.5" class="flex-grow">
                        <span id="strokeWidthValue" class="text-sm text-gray-500 w-8 text-right font-mono">2</span>
                    </div>
                </div>

            </div>

            <div class="space-y-5">
                <div>
                    <h2 class="text-lg font-medium text-gray-700 mb-2 text-center">Preview</h2>
                    <div id="svgPreview" class="rounded-lg p-4">
                        <p class="text-gray-400 text-sm">Adjust controls to generate shape</p>
                    </div>
                </div>

                <div>
                     <h2 class="text-lg font-medium text-gray-700 mb-2 text-center">Generated SVG Code</h2>
                     <div id="svgCodeOutput" class="text-xs sm:text-sm">
                         </div>
                     <button id="copyBtn" class="w-full mt-3 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md text-sm transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center justify-center space-x-2">
                         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                           <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.378h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876V5.25a.75.75 0 00-.75-.75h-1.5a.75.75 0 00-.75.75v.443A9.003 9.003 0 006 8.625a9.003 9.003 0 00-1.5-.781V5.25a.75.75 0 00-.75-.75h-1.5a.75.75 0 00-.75.75v1.69" />
                         </svg>
                         <span>Copy SVG Code</span>
                     </button>
                </div>
            </div>
        </div>

        <div id="message-box"></div>
    </div>

    <script>
        // --- DOM Elements ---
        const shapeTypeSelect = document.getElementById('shapeType');
        // Poly/Star
        const groupPolyStar = document.getElementById('groupPolyStar');
        const pointsSlider = document.getElementById('points');
        const pointsValue = document.getElementById('pointsValue');
        const outerRadiusSlider = document.getElementById('outerRadius');
        const outerRadiusValue = document.getElementById('outerRadiusValue');
        const innerRadiusControl = document.getElementById('innerRadiusControl');
        const innerRadiusSlider = document.getElementById('innerRadius');
        const innerRadiusValue = document.getElementById('innerRadiusValue');
        // Circle
        const groupCircle = document.getElementById('groupCircle');
        const circleRSlider = document.getElementById('circleR');
        const circleRValue = document.getElementById('circleRValue');
        const circleCXSlider = document.getElementById('circleCX');
        const circleCXValue = document.getElementById('circleCXValue');
        const circleCYSlider = document.getElementById('circleCY');
        const circleCYValue = document.getElementById('circleCYValue');
        // Ellipse
        const groupEllipse = document.getElementById('groupEllipse');
        const ellipseRXSlider = document.getElementById('ellipseRX');
        const ellipseRXValue = document.getElementById('ellipseRXValue');
        const ellipseRYSlider = document.getElementById('ellipseRY');
        const ellipseRYValue = document.getElementById('ellipseRYValue');
        const ellipseCXSlider = document.getElementById('ellipseCX');
        const ellipseCXValue = document.getElementById('ellipseCXValue');
        const ellipseCYSlider = document.getElementById('ellipseCY');
        const ellipseCYValue = document.getElementById('ellipseCYValue');
        // Rectangle / Rounded Rectangle
        const groupRectangle = document.getElementById('groupRectangle');
        const rectWidthSlider = document.getElementById('rectWidth');
        const rectWidthValue = document.getElementById('rectWidthValue');
        const rectHeightSlider = document.getElementById('rectHeight');
        const rectHeightValue = document.getElementById('rectHeightValue');
        const rectXSlider = document.getElementById('rectX');
        const rectXValue = document.getElementById('rectXValue');
        const rectYSlider = document.getElementById('rectY');
        const rectYValue = document.getElementById('rectYValue');
        const rectRXControl = document.getElementById('rectRXControl');
        const rectRXSlider = document.getElementById('rectRX');
        const rectRXValue = document.getElementById('rectRXValue');
        const rectRYControl = document.getElementById('rectRYControl');
        const rectRYSlider = document.getElementById('rectRY');
        const rectRYValue = document.getElementById('rectRYValue');
        // Line
        const groupLine = document.getElementById('groupLine');
        const lineX1Slider = document.getElementById('lineX1');
        const lineX1Value = document.getElementById('lineX1Value');
        const lineY1Slider = document.getElementById('lineY1');
        const lineY1Value = document.getElementById('lineY1Value');
        const lineX2Slider = document.getElementById('lineX2');
        const lineX2Value = document.getElementById('lineX2Value');
        const lineY2Slider = document.getElementById('lineY2');
        const lineY2Value = document.getElementById('lineY2Value');
        // Common
        const fillControl = document.getElementById('fillControl');
        const fillColorInput = document.getElementById('fillColor');
        const fillColorValue = document.getElementById('fillColorValue');
        const strokeColorInput = document.getElementById('strokeColor');
        const strokeColorValue = document.getElementById('strokeColorValue');
        const strokeWidthSlider = document.getElementById('strokeWidth');
        const strokeWidthValue = document.getElementById('strokeWidthValue');
        // Output
        const svgPreview = document.getElementById('svgPreview');
        const svgCodeOutput = document.getElementById('svgCodeOutput');
        const copyBtn = document.getElementById('copyBtn');
        const messageBox = document.getElementById('message-box');

        let messageTimeout; // For message box

        // --- Utility Functions ---
        function showMessage(text, type = 'success') {
            if (messageTimeout) clearTimeout(messageTimeout);
            messageBox.textContent = text;
            messageBox.className = `show ${type}`;
            messageTimeout = setTimeout(() => {
                messageBox.className = messageBox.className.replace('show', '');
                messageTimeout = null;
            }, 3000);
        }

        // Function to calculate points for polygon or star (relative to center 0,0)
        function calculatePolyStarPoints(shapeType, numPoints, outerR, innerR) {
            const points = [];
            const angleStep = (Math.PI * 2) / numPoints;

            for (let i = 0; i < numPoints; i++) {
                const angle = i * angleStep - Math.PI / 2; // Start from top

                // Outer point
                const x1 = outerR * Math.cos(angle);
                const y1 = outerR * Math.sin(angle);
                points.push(`${x1.toFixed(2)},${y1.toFixed(2)}`);

                // Inner point (for star)
                if (shapeType === 'star') {
                    const safeInnerR = Math.max(0, Math.min(innerR, outerR - 1)); // Ensure 0 <= innerR < outerR
                    const angleInner = angle + angleStep / 2;
                    const x2 = safeInnerR * Math.cos(angleInner);
                    const y2 = safeInnerR * Math.sin(angleInner);
                    points.push(`${x2.toFixed(2)},${y2.toFixed(2)}`);
                }
            }
            return points.join(' ');
        }

        // --- Update Controls Visibility ---
        function updateControlsVisibility() {
            const shapeType = shapeTypeSelect.value;

            // Hide all groups first
            groupPolyStar.classList.add('hidden');
            groupCircle.classList.add('hidden');
            groupEllipse.classList.add('hidden');
            groupRectangle.classList.add('hidden');
            groupLine.classList.add('hidden');
            fillControl.classList.remove('hidden'); // Show fill by default

            // Show relevant group
            if (shapeType === 'polygon' || shapeType === 'star') {
                groupPolyStar.classList.remove('hidden');
                innerRadiusControl.classList.toggle('hidden', shapeType !== 'star');
            } else if (shapeType === 'circle') {
                groupCircle.classList.remove('hidden');
            } else if (shapeType === 'ellipse') {
                groupEllipse.classList.remove('hidden');
            } else if (shapeType === 'rectangle' || shapeType === 'rounded_rectangle') {
                groupRectangle.classList.remove('hidden');
                rectRXControl.classList.toggle('hidden', shapeType !== 'rounded_rectangle');
                rectRYControl.classList.toggle('hidden', shapeType !== 'rounded_rectangle');
            } else if (shapeType === 'line') {
                groupLine.classList.remove('hidden');
                fillControl.classList.add('hidden'); // Hide fill for line
            }
        }


        // --- Main Generation Function ---
        function generateAndUpdateSVG() {
            const shapeType = shapeTypeSelect.value;
            const fill = fillColorInput.value;
            const stroke = strokeColorInput.value;
            const strokeWidth = parseFloat(strokeWidthSlider.value);

            // Update common displayed values
            fillColorValue.textContent = fill.toUpperCase();
            strokeColorValue.textContent = stroke.toUpperCase();
            strokeWidthValue.textContent = strokeWidth;

            let svgElementString = '';
            const viewBox = "0 0 300 300"; // Fixed viewBox

            // Generate SVG element based on type
            switch (shapeType) {
                case 'polygon':
                case 'star': {
                    const numPoints = parseInt(pointsSlider.value, 10);
                    const outerR = parseInt(outerRadiusSlider.value, 10);
                    let innerR = parseInt(innerRadiusSlider.value, 10);
                    pointsValue.textContent = numPoints;
                    outerRadiusValue.textContent = outerR;
                    innerRadiusValue.textContent = innerR;
                    if (shapeType === 'star' && innerR >= outerR) {
                        innerR = Math.max(0, outerR - 5);
                        innerRadiusSlider.value = innerR;
                        innerRadiusValue.textContent = innerR;
                    }
                    const pointsString = calculatePolyStarPoints(shapeType, numPoints, outerR, innerR);
                    // Center the polygon/star using transform
                    svgElementString = `<polygon points="${pointsString}" transform="translate(150 150)" fill="${fill}" stroke="${stroke}" stroke-width="${strokeWidth}" />`;
                    break;
                }
                case 'circle': {
                    const r = parseInt(circleRSlider.value, 10);
                    const cx = parseInt(circleCXSlider.value, 10);
                    const cy = parseInt(circleCYSlider.value, 10);
                    circleRValue.textContent = r;
                    circleCXValue.textContent = cx;
                    circleCYValue.textContent = cy;
                    svgElementString = `<circle cx="${cx}" cy="${cy}" r="${r}" fill="${fill}" stroke="${stroke}" stroke-width="${strokeWidth}" />`;
                    break;
                }
                 case 'ellipse': {
                    const rx = parseInt(ellipseRXSlider.value, 10);
                    const ry = parseInt(ellipseRYSlider.value, 10);
                    const cx = parseInt(ellipseCXSlider.value, 10);
                    const cy = parseInt(ellipseCYSlider.value, 10);
                    ellipseRXValue.textContent = rx;
                    ellipseRYValue.textContent = ry;
                    ellipseCXValue.textContent = cx;
                    ellipseCYValue.textContent = cy;
                    svgElementString = `<ellipse cx="${cx}" cy="${cy}" rx="${rx}" ry="${ry}" fill="${fill}" stroke="${stroke}" stroke-width="${strokeWidth}" />`;
                    break;
                }
                case 'rectangle':
                case 'rounded_rectangle': {
                    const width = parseInt(rectWidthSlider.value, 10);
                    const height = parseInt(rectHeightSlider.value, 10);
                    const x = parseInt(rectXSlider.value, 10);
                    const y = parseInt(rectYSlider.value, 10);
                    const rx = (shapeType === 'rounded_rectangle') ? parseInt(rectRXSlider.value, 10) : 0;
                    const ry = (shapeType === 'rounded_rectangle') ? parseInt(rectRYSlider.value, 10) : 0;
                    rectWidthValue.textContent = width;
                    rectHeightValue.textContent = height;
                    rectXValue.textContent = x;
                    rectYValue.textContent = y;
                    rectRXValue.textContent = rx;
                    rectRYValue.textContent = ry;
                    svgElementString = `<rect x="${x}" y="${y}" width="${width}" height="${height}" rx="${rx}" ry="${ry}" fill="${fill}" stroke="${stroke}" stroke-width="${strokeWidth}" />`;
                    break;
                }
                 case 'line': {
                    const x1 = parseInt(lineX1Slider.value, 10);
                    const y1 = parseInt(lineY1Slider.value, 10);
                    const x2 = parseInt(lineX2Slider.value, 10);
                    const y2 = parseInt(lineY2Slider.value, 10);
                    lineX1Value.textContent = x1;
                    lineY1Value.textContent = y1;
                    lineX2Value.textContent = x2;
                    lineY2Value.textContent = y2;
                    // Line doesn't use fill, only stroke
                    svgElementString = `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="${stroke}" stroke-width="${strokeWidth}" />`;
                    break;
                 }
            }

            // Generate final SVG string
            const svgString = `<svg viewBox="${viewBox}" width="300" height="300" xmlns="http://www.w3.org/2000/svg">\n  ${svgElementString}\n</svg>`;

            // Update preview
            svgPreview.innerHTML = svgString;

            // Update code output (basic formatting)
            svgCodeOutput.textContent = svgString;

            // Update visibility of controls AFTER generating
            updateControlsVisibility();
        }

        // --- Event Listeners ---
        shapeTypeSelect.addEventListener('change', generateAndUpdateSVG);
        // Add listeners for ALL sliders and color inputs
        const controls = document.querySelectorAll('input[type="range"], input[type="color"]');
        controls.forEach(control => {
            control.addEventListener('input', generateAndUpdateSVG);
        });

        // Copy Button
        copyBtn.addEventListener('click', () => {
            const codeToCopy = svgCodeOutput.textContent;
            if (!codeToCopy || codeToCopy.trim() === '') {
                showMessage("Nothing to copy.", "error");
                return;
            }
            navigator.clipboard.writeText(codeToCopy)
                .then(() => showMessage("SVG code copied!", "success"))
                .catch(err => {
                    console.error("Failed to copy SVG code: ", err);
                    showMessage("Failed to copy.", "error");
                });
        });

        // --- Initial Load ---
        generateAndUpdateSVG(); // Generate default shape and set initial control visibility

    </script>

</body>
</html>
